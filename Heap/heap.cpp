#include<bits/stdc++.h>
using namespace std;
void swap(int *x, int *y) ;
class Minheap{
private:
    int *harr;
    int capacity;
    int heap_size;
public:
    Minheap(int capacity);

    void minHeapify(int);

    int parent(int i){return (i-1)/2;}
    int left(int i){return 2*i+1;}
    int right(int i){return 2*i+2;}

    int extractMin();
    void decreaseKey(int i,int new_val);

    int getMin();

    void deleteKey(int i);

    void insertKey(int k);
};
int Minheap::getMin(){
    if(heap_size == 0){
        return INT_MIN;
    }
    return harr[0];
}
void Minheap::deleteKey(int i){
    decreaseKey(i,INT_MIN);
    extractMin();
}
Minheap::Minheap(int capacity){
    this->heap_size = 0;
    this->capacity = capacity;
    harr = new int[capacity];
}
void Minheap::insertKey(int k){
    if(heap_size == capacity){
        cout<<"house full"<<endl;
        return;
    }
    heap_size++;
    int i = heap_size - 1;
    harr[i] = k;
    while(i != 0 && harr[parent(i)] > harr[i]){
        swap(&harr[i],&harr[parent(i)]);
        i = parent(i);
    }
}

void Minheap::decreaseKey(int i,int new_val){
    harr[i] = new_val;
    while(i != 0 && harr[parent(i)] > harr[i]){
        swap(&harr[i],&harr[parent(i)] );
        i = parent(i);
    }
}
int Minheap::extractMin(){
    if(heap_size <= 0){
        return INT_MAX;
    }
    if(heap_size == 1){
        heap_size--;
        return harr[0];
    }
    int ret = harr[0];
    harr[0] = harr[heap_size-1];
    heap_size--;
    minHeapify(0);
    return ret;
}
void Minheap::minHeapify(int i){
    int l = 2*i+1;
    int r = 2*i+2;
    int smallest = i;
    if(l<heap_size && harr[l] < harr[i]){
        smallest = l;
    }
    if(r<heap_size && harr[smallest] > harr[r]){
        smallest = r;
    }
    if(smallest != i){
        swap(&harr[i], &harr[smallest]); 
        minHeapify(smallest);
    }
}
void swap(int *x, int *y) 
{ 
    int temp = *x; 
    *x = *y; 
    *y = temp; 
} 
void minHeapify(int harr[],int heap_size,int i){
    int l = 2*i+1;
    int r = 2*i+2;
    int smallest = i;
    if(l<heap_size && harr[l] < harr[i]){
        smallest = l;
    }
    if(r<heap_size && harr[smallest] > harr[r]){
        smallest = r;
    }
    if(smallest != i){
        swap(&harr[i], &harr[smallest]); 
        minHeapify(harr,heap_size,smallest);
    }
    return;
}
void heapSort(int arr[],int size){

    //build heap
    
    for(int i=size/2 -1;i>=0;i--){
        minHeapify(arr,size,i);
    }

    for(int i=size-1;i>=0;i--){
        swap(&arr[0],&arr[i]);
        minHeapify(arr,i,0);
    }


}
int main() 
{ 
    Minheap h(11); 
    h.insertKey(3); 
    h.insertKey(2); 
    h.deleteKey(1); 
    h.insertKey(15); 
    h.insertKey(5); 
    h.insertKey(4); 
    h.insertKey(45); 
    cout << h.extractMin() << " "; 
    cout << h.getMin() << " "; 
    h.decreaseKey(2, 1); 
    cout << h.getMin(); 
    cout<<endl;
    int arr[100];
    for(int i=0,j=100;i<100;i++,j--){
        arr[i] = j;
    }
    heapSort(arr, 100); 
    for(int i=0;i<100;i++){
        cout<<arr[i]<<" ";
    }
    return 0; 
} 